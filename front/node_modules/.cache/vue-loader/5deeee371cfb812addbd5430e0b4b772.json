{"remainingRequest":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\toolOfjava\\factoryFront\\front\\src\\components\\Login.vue?vue&type=style&index=0&id=ef68022e&scoped=true&lang=css&","dependencies":[{"path":"D:\\toolOfjava\\factoryFront\\front\\src\\components\\Login.vue","mtime":1627884533796},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KQGltcG9ydCAiLi4vYXNzZXRzL2Nzcy9sb2dpbi9sb2dpbi5jc3MiOw0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n\r\n  <!--最外层-->\r\n    <div class=\"login_container\">\r\n\r\n        <!--中间层-->\r\n        <div class=\"login_box\">\r\n          <!--图标区域-->\r\n          <div class=\"avatar_box\"  :title=\"faceTitle\" v-loading.fullscreen.lock=\"fullscreenLoading\" style=\"cursor: pointer\" @click=\"faceSubmit\">\r\n              <img :src=\"faceImgSrc\"/>\r\n          </div>\r\n\r\n          <!--登录表单区域-->\r\n          <el-tabs @tab-click=\"face\" type=\"border-card\" class=\"tabs_login\">\r\n            <el-tab-pane>\r\n              <span slot=\"label\"><i class=\"el-icon-unlock\"></i> 密码登录</span>\r\n                  <div class=\"tabs_login_div\">\r\n                    <el-form :rules=\"loginFormRules\" :model=\"loginForm\" ref=\"loginFormRef\" >\r\n                      <!--账号-->\r\n                      <el-form-item prop=\"username\">\r\n                        <el-input v-model=\"loginForm.username\"\r\n                                  type=\"text\" placeholder=\"账号\"\r\n                        prefix-icon=\"el-icon-s-custom\"\r\n                        ></el-input>\r\n                      </el-form-item>\r\n                      <!--密码-->\r\n                      <el-form-item prop=\"password\">\r\n                        <el-input v-model=\"loginForm.password\"\r\n                                  type=\"password\" placeholder=\"密码\"\r\n                        prefix-icon=\"el-icon-key\"\r\n                        ></el-input>\r\n                      </el-form-item>\r\n\r\n                      <el-form-item class=\"btns\">\r\n                        <el-button @click=\"login\" type=\"primary\">登录</el-button>\r\n                        <el-button @click=\"restLogin\" type=\"info\">重置</el-button>\r\n                      </el-form-item>\r\n\r\n                    </el-form>\r\n                  </div>\r\n\r\n            </el-tab-pane>\r\n\r\n\r\n          </el-tabs>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport Face from \"@/components/login/Face\";\r\nimport qs from \"qs\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components: {Face},\r\n  data(){\r\n    return{\r\n      loginForm:{\r\n        username:'',\r\n        password:''\r\n      },\r\n      faceState:false,\r\n      faceTitle:'',\r\n      faceImgSrc:'https://thisuseravatar.oss-cn-guangzhou.aliyuncs.com/adminSystem/logo.jpg',\r\n      context:'',\r\n      video:'',\r\n      canvas:'',\r\n      imgName:'',\r\n      fullscreenLoading:false,\r\n      loginFormRules:{\r\n        username: [\r\n          {message:\"请输入您的账号\",trigger:'blur',required:true},\r\n          {min:6,message:\"至少大于等于6个字符\",trigger:'blur'}\r\n        ],\r\n        password: [\r\n          {message:\"请输入您的密码\",trigger:'blur',required:true},\r\n          {min:6,message:\"至少大于等于6个字符\",trigger:'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n\r\n    //当选中第二个tab时，开启摄像头\r\n    face(e){\r\n      if(e.index==1){\r\n\r\n        this.faceState = true;\r\n        this.faceTitle = '开始登录';\r\n        this.faceImgSrc = 'https://thisuseravatar.oss-cn-guangzhou.aliyuncs.com/adminSystem/facedong3.gif';\r\n\r\n\r\n        function getUserMedia(constraints,success,error){\r\n          if(navigator.mediaDevices.getUserMedia){\r\n            navigator.mediaDevices.getUserMedia(constraints).then(success);\r\n          }else if (navigator.webkitGetUserMedia) {\r\n            navigator.webkitGetUserMedia(constraints,success,error);\r\n          }else if (navigator.mozGetUserMedia) {\r\n            navigator.mozGetUserMedia(constraints,success,error);\r\n          }else if (navigator.getUserMedia) {\r\n            navigator.getUserMedia(constraints,success,error)\r\n          }\r\n        }\r\n        this.video = document.getElementById('video');\r\n        this.canvas = document.getElementById('canvas');\r\n        this.context = canvas.getContext('2d');\r\n        var video = this.video;\r\n        //成功回调\r\n        function success(stream){\r\n          video.srcObject = stream;\r\n          video.play();\r\n        }\r\n        //失败回调\r\n        function error(error) {\r\n          console.log(\"访问用户媒体失败\");\r\n        }\r\n        //开启摄像头\r\n        if (navigator.mediaDevices.getUserMedia || navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia) {\r\n          getUserMedia({video:{width:500,height:500}},success,error)\r\n        }else {\r\n          alert(\"不支持\");\r\n        }\r\n\r\n      }else{\r\n\r\n        this.faceState = false;\r\n        this.faceTitle = '';\r\n        this.faceImgSrc = 'https://thisuseravatar.oss-cn-guangzhou.aliyuncs.com/adminSystem/logo.jpg';\r\n\r\n        //重新刷新页面\r\n        location. reload();\r\n      }\r\n    },\r\n\r\n    //提交人脸信息\r\n    faceSubmit(){\r\n      if(this.faceState){\r\n        //调用子组件 实现拍照的功能\r\n        this.$refs.faceChild.startTakingPhotos(this.context,this.video);\r\n      }\r\n\r\n    },\r\n    //修改图片的值\r\n    updateImg(src){\r\n      this.faceImgSrc = src ;\r\n    },\r\n    //重置表单\r\n    restLogin(){\r\n      this.$refs.loginFormRef.resetFields();\r\n    },\r\n\r\n    //开始登录\r\n    login(){\r\n\r\n      this.$refs.loginFormRef.validate((valid)=>{\r\n          if(valid){\r\n\r\n            this.$http.post('/login?'+qs.stringify(this.loginForm)).then(res=>{\r\n\r\n              const jwt=res.headers['authorization']\r\n\r\n              this.$store.commit('SET_TOKEN',jwt)\r\n              const loading = this.$loading({\r\n                lock: true,\r\n                text: '登录中....',\r\n                spinner: 'el-icon-loading',\r\n                background: 'rgba(0, 0, 0, 0.7)'\r\n              });\r\n              setTimeout(() => {\r\n                loading.close();\r\n                this.$router.push(\"/home\");\r\n              }, 2000);\r\n\r\n            })\r\n          }\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style  scoped>\r\n@import \"../assets/css/login/login.css\";\r\n</style>"]}]}
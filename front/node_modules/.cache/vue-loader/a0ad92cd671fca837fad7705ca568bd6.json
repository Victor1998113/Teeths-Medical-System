{"remainingRequest":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\toolOfjava\\factoryFront\\front\\src\\views\\sys\\Scheduling.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\toolOfjava\\factoryFront\\front\\src\\views\\sys\\Scheduling.vue","mtime":1627884533820},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJTY2hlZHVsaW5nIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaW5wdXQ6ICcnLA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIGRvY3RvcjogW10sDQogICAgICBzZWFyY2hGb3JtOiB7fSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgc2l6ZTogNSwNCiAgICAgIGN1cnJlbnQ6IDEsDQogICAgICBuYW1lOiAnJywNCiAgICAgIC8v6aqM6K+B6KeE5YiZDQogICAgICBzdHVSdWxlczogew0KICAgICAgICBkb2N0b3JpZDogW3sNCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5Yy755Sf5ZCN56ewIiwNCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsDQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBkYXRldGltZTogW3sNCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5pel5pyfIiwNCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgICAgICB9XQ0KICAgICAgfSwNCiAgICAgIC8v5re75Yqg5pe26Ze0DQogICAgICBwaWNrZXJPcHRpb25zOiB7DQogICAgICAgIHNob3J0Y3V0czogW3sNCiAgICAgICAgICB0ZXh0OiAn5LuK5aSpJywNCiAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgew0KICAgICAgICAgICAgcGlja2VyLiRlbWl0KCdwaWNrJywgbmV3IERhdGUoKSk7DQogICAgICAgICAgfQ0KICAgICAgICB9LCB7DQogICAgICAgICAgdGV4dDogJ+aYqOWkqScsDQogICAgICAgICAgb25DbGljayhwaWNrZXIpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gMzYwMCAqIDEwMDAgKiAyNCk7DQogICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBkYXRlKTsNCiAgICAgICAgICB9DQogICAgICAgIH0sIHsNCiAgICAgICAgICB0ZXh0OiAn5LiA5ZGo5YmNJywNCiAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgew0KICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSAzNjAwICogMTAwMCAqIDI0ICogNyk7DQogICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBkYXRlKTsNCiAgICAgICAgICB9DQogICAgICAgIH1dDQogICAgICB9LA0KDQogICAgICAvL+e8lui+keaCo+iAheW8ueWHuuWxgg0KICAgICAgZGlhbG9nVGFibGVWaXNpYmxlOiBmYWxzZSwNCiAgICAgIC8v5re75Yqg5oKj6ICF5by55Ye65bGCDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsDQogICAgICBmb3JtOiB7fSwNCiAgICAgIGRvY3RvcnVwOiB7fSwNCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAnMTIwcHgnDQogICAgfQ0KDQoNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICAvL+mhtemdouWKoOi9veWujOaJp+ihjOivpeaWueazlQ0KICAgIHRoaXMuZ2V0TGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZm9ybWF0dGVyKHJvdywgY29sdW1uKSB7DQogICAgICByZXR1cm4gcm93LmFkZHJlc3M7DQogICAgfSwNCiAgICAvL+iOt+WPluWNleihjOaVsOaNrui1i+WAvA0KICAgIHVwZGF0ZShyb3cpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJyb3c6IiArIHJvdyk7DQogICAgICB0aGlzLmRvY3RvcnVwID0gcm93Ow0KICAgICAgdGhpcy5nZXREb2N0b3JMaXN0KCk7DQogICAgICB0aGlzLmRpYWxvZ1RhYmxlVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICAvL+S/ruaUuQ0KICAgIHVwZGF0ZUJ5SWQoKSB7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmRvY3RvcnVwKQ0KICAgICAgdGhpcy4kcmVmcy5kb2N0b3J1cC52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHJldHVybjsNCiAgICAgICAgdGhpcy4kaHR0cC5wdXQoIi9zeXMvc2NoZWR1bGluZy91cGRhdGEiLCB0aGlzLmRvY3RvcnVwKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpDQogICAgICAgICAgdGhpcy5kaWFsb2dUYWJsZVZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvL+a3u+WKoA0KICAgIHNhdmUoZm9ybSkgew0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsNCiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOw0KICAgICAgICBjb25zdCB7ZGF0YTogcmVzfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgiL3N5cy9zY2hlZHVsaW5nL3NhdmUiLCB0aGlzLmZvcm0pOw0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOaIkOWKnyIpDQogICAgICAgIC8v5riF56m65pWw5o2uDQogICAgICAgIHRoaXMuZm9ybSA9IHticmFuZF9yaWdodDogMH0NCiAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsNCiAgICAgIH0pDQogICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0pDQogICAgfSwNCiAgICAvL+afpeivouaJgOacieeahOWMu+eUnw0KICAgIGdldERvY3Rvckxpc3QoKSB7DQogICAgICB0aGlzLiRodHRwLmdldCgnL3N5cy9zY2hlZHVsaW5nL2RvY3Rvckxpc3QnKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZG9jdG9yID0gcmVzLmRhdGEuZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v5Yig6ZmkDQogICAgb3BlbihpbmRleCwgcm93KSB7DQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xoja/lk4HvvIzmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsNCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KLy8gdHlwZeWtl+auteihqOaYjua2iOaBr+exu+Wei++8jOWPr+S7peS4unN1Y2Nlc3PvvIxlcnJvcu+8jGluZm/lkox3YXJuaW5n77yM5peg5pWI55qE6K6+572u5bCG5Lya6KKr5b+955WlDQogICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICB9DQogICAgICApLnRoZW4oKCkgPT4gew0KLy/lpoLmnpzngrnlh7vnoa7lrprmjInpkq7vvIzpnIDopoHosIPnlKjliKDpmaTmlrnms5Xov5vooYzliKDpmaQNCiAgICAgICAgICAgIHRoaXMuJGh0dHAoew0KICAgICAgICAgICAgICB1cmw6ICcvc3lzL3NjaGVkdWxpbmcvZGVsZXRlP2F0aWQ9JyArIHJvdy5hdGlkLA0KICAgICAgICAgICAgICBtZXRob2Q6ICdkZWxldGUnDQogICAgICAgICAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5YaM6Zmk5oiQ5YqfIScNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgKS5jYXRjaCgoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvICcsDQogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWGjOmZpCcNCiAgICAgICAgfSk7DQogICAgICB9KQ0KICAgIH0sDQogICAgLy/ojrflj5bmlbDmja4NCiAgICBnZXRMaXN0KCkgew0KICAgICAgdGhpcy4kaHR0cC5nZXQoIi9zeXMvc2NoZWR1bGluZy9saXN0Iiwgew0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsDQogICAgICAgICAgY3VycmVudDogdGhpcy5jdXJyZW50LA0KICAgICAgICAgIHNpemU6IHRoaXMuc2l6ZQ0KICAgICAgICB9DQogICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEuZGF0YS5yZWNvcmRzDQogICAgICAgIHRoaXMuc2l6ZSA9IHJlcy5kYXRhLmRhdGEuc2l6ZQ0KICAgICAgICB0aGlzLmN1cnJlbnQgPSByZXMuZGF0YS5kYXRhLmN1cnJlbnQNCiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGEudG90YWwNCg0KDQogICAgICB9KQ0KICAgIH0sDQogICAgLy/mk43kvZwNCiAgICBoYW5kbGVFZGl0KGluZGV4LCByb3cpIHsNCiAgICAgIGNvbnNvbGUubG9nKGluZGV4LCByb3cpOw0KICAgIH0sDQogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMuc2l6ZSA9IHZhbA0KICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLmN1cnJlbnQgPSB2YWwNCiAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Scheduling.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Scheduling.vue","sourceRoot":"src/views/sys","sourcesContent":["<template>\r\n  <div>\r\n    <!--    添加弹出层-->\r\n    <el-dialog title=\"医生排班\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :model=\"form\" :rules=\"stuRules\" ref=\"form\">\r\n        <el-form-item label=\"医生姓名\" :label-width=\"formLabelWidth\" prop=\"doctorid\">\r\n          <el-select v-model=\"form.doctorid\" placeholder=\"请选择要医生\">\r\n            <el-option v-for=\"item in doctor\" :key=\"item.doctorid\" :label=\"item.name\"\r\n                       :value=\"item.doctorid\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"日期时间\" :label-width=\"formLabelWidth\" prop=\"datetime\">\r\n          <div class=\"block\">\r\n            <el-date-picker\r\n                v-model=\"form.datetime\"\r\n                type=\"datetime\"\r\n                format=\"yyyy-MM-dd hh:mm:ss\"\r\n                value-format=\"yyyy-MM-dd hh:mm:ss\"\r\n                placeholder=\"选择日期时间\">\r\n            </el-date-picker>\r\n          </div>\r\n        </el-form-item>\r\n\r\n\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"save()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!--   编辑患者弹出层-->\r\n    <el-dialog title=\"编辑排班信息\" :visible.sync=\"dialogTableVisible\">\r\n\r\n      <el-form :model=\"doctorup\" :rules=\"stuRules\" ref=\"doctorup\">\r\n        <el-form-item label=\"医生姓名\" :label-width=\"formLabelWidth\" prop=\"doctorid\">\r\n          <el-select v-model=\"doctorup.doctorid\" placeholder=\"请选择要医生\">\r\n            <el-option v-for=\"item in doctor\" :key=\"item.doctorid\" :label=\"item.name\"\r\n                       :value=\"item.doctorid\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"日期时间\" :label-width=\"formLabelWidth\" prop=\"datetime\">\r\n          <div class=\"block\">\r\n            <el-date-picker\r\n                v-model=\"doctorup.datetime\"\r\n                type=\"datetime\"\r\n                format=\"yyyy-MM-dd hh:mm:ss\"\r\n                value-format=\"yyyy-MM-dd hh:mm:ss\"\r\n                placeholder=\"选择日期时间\">\r\n            </el-date-picker>\r\n          </div>\r\n        </el-form-item>\r\n\r\n\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogTableVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"updateById()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <div class=\"grid-content bg-purple-dark\">\r\n\r\n          <div id=\"magicalDragScene\" class=\"mc-root mc-ui-absolute-pane\">\r\n            <el-row>\r\n              <el-col :xs=\"24\">\r\n                <el-card header=\"医生排班\">\r\n\r\n                  <el-row>\r\n                    <el-col :span=\"4\">\r\n                      <div class=\"grid-content bg-purple\">\r\n                        <div class=\"grid-content bg-purple\">\r\n                          <el-input\r\n                              placeholder=\"请输入\"\r\n                              v-model=\"name\"\r\n                              clearable>\r\n                          </el-input>\r\n                        </div>\r\n                      </div>\r\n                    </el-col>\r\n                    <el-col :span=\"4\">\r\n                      <div class=\"grid-content bg-purple-light\">\r\n                        <el-button type=\"primary\" plain icon=\"el-icon-search\" @click=\"getList\">搜索</el-button>\r\n                      </div>\r\n                    </el-col>\r\n                    <el-col :span=\"16\">\r\n                      <div class=\"grid-content bg-purple\" style=\"text-align: left\">\r\n                        <el-button class=\"el-icon-circle-plus-outline\" type=\"primary\"\r\n                                   @click=\"getDoctorList(),dialogFormVisible = true\"> 新增排班\r\n                        </el-button>\r\n                      </div>\r\n                    </el-col>\r\n                  </el-row>\r\n\r\n\r\n                </el-card>\r\n              </el-col>\r\n              <el-col :xs=\"24\">\r\n                <el-table\r\n                    :data=\"tableData\"\r\n                    style=\"width: 100%\"\r\n                    :default-sort=\"{prop: 'date', order: 'descending'}\">\r\n                  <el-table-column\r\n                      prop=\"name\"\r\n                      label=\"医生姓名\"\r\n                      sortable>\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                      prop=\"datetime\"\r\n                      label=\"日期时间\"\r\n                      sortable>\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                      prop=\"appstate\"\r\n                      label=\"是否预定\"\r\n                      sortable>\r\n                    <template slot-scope=\"scope\">\r\n                      <el-tag size=\"small\" v-if=\"scope.row.appstate === 0\" type=\"success\">未预定</el-tag>\r\n                      <el-tag size=\"small\" v-else-if=\"scope.row.appstate === 1\" type=\"info\" >已预定</el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column label=\"操作\" width=\"350\">\r\n                    <template slot-scope=\"scope\">\r\n                      <div  v-if=\"scope.row.appstate === 0\">\r\n                        <el-button size=\"mini\" type=\"info\" plain\r\n                                   @click=\"update(scope.row)\">编辑\r\n                        </el-button>\r\n                        <el-button\r\n                            size=\"mini\"\r\n                            type=\"danger\"\r\n                            @click=\"open(scope.$index, scope.row)\">删除\r\n                        </el-button>\r\n                      </div>\r\n\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n\r\n                <div class=\"block\" style=\"background-color: white\">\r\n                  <el-pagination\r\n                      @size-change=\"handleSizeChange\"\r\n                      @current-change=\"handleCurrentChange\"\r\n                      layout=\"total, sizes, prev, pager, next, jumper\"\r\n                      :page-sizes=\"[5, 10, 30, 50]\"\r\n                      :current-page=\"current\"\r\n                      :page-size=\"size\"\r\n                      :total=\"total\">\r\n                  </el-pagination>\r\n                </div>\r\n              </el-col>\r\n\r\n            </el-row>\r\n          </div>\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Scheduling\",\r\n  data() {\r\n    return {\r\n      input: '',\r\n      tableData: [],\r\n      doctor: [],\r\n      searchForm: {},\r\n      total: 0,\r\n      size: 5,\r\n      current: 1,\r\n      name: '',\r\n      //验证规则\r\n      stuRules: {\r\n        doctorid: [{\r\n          message: \"请输入医生名称\",\r\n          trigger: 'blur',\r\n          required: true\r\n        }\r\n        ],\r\n        datetime: [{\r\n          message: \"请输入日期\",\r\n          trigger: 'change',\r\n          required: true\r\n        }]\r\n      },\r\n      //添加时间\r\n      pickerOptions: {\r\n        shortcuts: [{\r\n          text: '今天',\r\n          onClick(picker) {\r\n            picker.$emit('pick', new Date());\r\n          }\r\n        }, {\r\n          text: '昨天',\r\n          onClick(picker) {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() - 3600 * 1000 * 24);\r\n            picker.$emit('pick', date);\r\n          }\r\n        }, {\r\n          text: '一周前',\r\n          onClick(picker) {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\r\n            picker.$emit('pick', date);\r\n          }\r\n        }]\r\n      },\r\n\r\n      //编辑患者弹出层\r\n      dialogTableVisible: false,\r\n      //添加患者弹出层\r\n      dialogFormVisible: false,\r\n      form: {},\r\n      doctorup: {},\r\n      formLabelWidth: '120px'\r\n    }\r\n\r\n\r\n  },\r\n  mounted() {\r\n    //页面加载完执行该方法\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    formatter(row, column) {\r\n      return row.address;\r\n    },\r\n    //获取单行数据赋值\r\n    update(row) {\r\n      console.log(\"row:\" + row);\r\n      this.doctorup = row;\r\n      this.getDoctorList();\r\n      this.dialogTableVisible = true;\r\n    },\r\n    //修改\r\n    updateById() {\r\n      console.log(this.doctorup)\r\n      this.$refs.doctorup.validate(async valid => {\r\n        if (!valid) return;\r\n        this.$http.put(\"/sys/scheduling/updata\", this.doctorup).then((res) => {\r\n          this.$message.success(\"修改成功\")\r\n          this.dialogTableVisible = false;\r\n          this.getList();\r\n        })\r\n      })\r\n    },\r\n    //添加\r\n    save(form) {\r\n      this.$refs.form.validate(async valid => {\r\n        if (!valid) return;\r\n        const {data: res} = await this.$http.post(\"/sys/scheduling/save\", this.form);\r\n        this.$message.success(\"添加成功\")\r\n        //清空数据\r\n        this.form = {brand_right: 0}\r\n        this.getList();\r\n        this.dialogFormVisible = false;\r\n      })\r\n      console.log(this.form)\r\n    },\r\n    //查询所有的医生\r\n    getDoctorList() {\r\n      this.$http.get('/sys/scheduling/doctorList').then(res => {\r\n        this.doctor = res.data.data\r\n      })\r\n    },\r\n    //删除\r\n    open(index, row) {\r\n      this.$confirm('此操作将永久删除该药品，是否继续?', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n// type字段表明消息类型，可以为success，error，info和warning，无效的设置将会被忽略\r\n            type: 'warning'\r\n          }\r\n      ).then(() => {\r\n//如果点击确定按钮，需要调用删除方法进行删除\r\n            this.$http({\r\n              url: '/sys/scheduling/delete?atid=' + row.atid,\r\n              method: 'delete'\r\n            }).then((res) => {\r\n              if (res.data.code == 200) {\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '册除成功!'\r\n                });\r\n              }\r\n              this.getList();\r\n            })\r\n          }\r\n      ).catch(() => {\r\n        this.$message({\r\n          type: 'info ',\r\n          message: '已取消册除'\r\n        });\r\n      })\r\n    },\r\n    //获取数据\r\n    getList() {\r\n      this.$http.get(\"/sys/scheduling/list\", {\r\n        params: {\r\n          name: this.name,\r\n          current: this.current,\r\n          size: this.size\r\n        }\r\n      }).then(res => {\r\n        this.tableData = res.data.data.records\r\n        this.size = res.data.data.size\r\n        this.current = res.data.data.current\r\n        this.total = res.data.data.total\r\n\r\n\r\n      })\r\n    },\r\n    //操作\r\n    handleEdit(index, row) {\r\n      console.log(index, row);\r\n    },\r\n    handleSizeChange(val) {\r\n      this.size = val\r\n      this.getList()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.current = val\r\n      this.getList()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}
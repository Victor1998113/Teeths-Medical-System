{"remainingRequest":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\toolOfjava\\factoryFront\\front\\src\\views\\sys\\AppointmentList.vue?vue&type=style&index=0&id=046f9dd1&scoped=true&lang=css&","dependencies":[{"path":"D:\\toolOfjava\\factoryFront\\front\\src\\views\\sys\\AppointmentList.vue","mtime":1627884533810},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZ3JpZC1jb250ZW50IHsNCiAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICBtaW4taGVpZ2h0OiAzNnB4Ow0KfQ0KDQovKuihqOagvOagt+W8jyovDQouZGVtby10YWJsZS1leHBhbmQgew0KICBmb250LXNpemU6IDA7DQp9DQouZGVtby10YWJsZS1leHBhbmQgbGFiZWwgew0KICB3aWR0aDogOTBweDsNCiAgY29sb3I6ICM5OWE5YmY7DQp9DQouZGVtby10YWJsZS1leHBhbmQgLmVsLWZvcm0taXRlbSB7DQogIG1hcmdpbi1yaWdodDogMDsNCiAgbWFyZ2luLWJvdHRvbTogMDsNCiAgd2lkdGg6IDUwJTsNCn0NCg=="},{"version":3,"sources":["AppointmentList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0eA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppointmentList.vue","sourceRoot":"src/views/sys","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <!--    新增预约信息弹出层-->\r\n      <el-dialog title=\"新增预约信息\" :visible.sync=\"dialogFormVisible\" width=\"700px\" >\r\n        <el-form :model=\"form\"  :rules=\"appFormRules\"  ref=\"appFormRef\" >\r\n          <el-form-item prop=\"username\" label=\"预约人姓名\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"form.username\" autocomplete=\"off\" ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"预约人电话\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"form.phone\" autocomplete=\"off\" ></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item prop=\"gender\" label=\"性别\" :label-width=\"formLabelWidth\">\r\n            <el-radio v-model=\"form.gender\" label=\"1\" >男</el-radio>\r\n            <el-radio v-model=\"form.gender\" label=\"2\">女</el-radio>\r\n          </el-form-item>\r\n\r\n          <el-form-item prop=\"age\" label=\"年龄\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"form.age\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item prop=\"datetime\" label=\"预约医生和时间\" :label-width=\"formLabelWidth\">\r\n            <el-row>\r\n              <el-col :span=\"8\">\r\n                <div class=\"grid-content bg-purple\">\r\n                  <el-input v-model=\"form.name\" autocomplete=\"off\" placeholder=\"医生姓名\" :disabled=\"true\"></el-input>\r\n                </div>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <div class=\"grid-content bg-purple\">\r\n                  <el-input v-model=\"form.datetime\" autocomplete=\"off\" placeholder=\"时间段\" :disabled=\"true\"></el-input>\r\n                </div>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <div class=\"grid-content bg-purple-light\">\r\n                  <el-button  @click=\"selectDoctorTime\">选择预约的医生和时间</el-button>\r\n                </div>\r\n              </el-col>\r\n            </el-row>\r\n\r\n\r\n            <el-dialog\r\n                width=\"35%\"\r\n                title=\"选择预约的医生和时间\"\r\n                :visible.sync=\"innerVisible\"\r\n                append-to-body>\r\n\r\n              <el-row>\r\n                <el-col :span=\"12\">\r\n\r\n                  <div class=\"grid-content bg-purple-light\" style=\"text-align: center\">\r\n                    <el-select v-model=\"form.doctorid\"  @change=\"composing\" placeholder=\"请选择要预约的医生\">\r\n                      <el-option v-for=\"dc in doctor\"\r\n                                 :key=\"dc.doctorid\"\r\n                                 :label=\"dc.name\"\r\n                                 :value=\"dc.doctorid\"\r\n\r\n                      >\r\n                      </el-option>\r\n                    </el-select>\r\n                  </div>\r\n\r\n                </el-col>\r\n\r\n                <el-col :span=\"12\">\r\n                  <div class=\"grid-content bg-purple-light\" style=\"text-align: center\">\r\n\r\n\r\n                    <el-select v-model=\"form.atid\" :no-data-text=\"no_data_text\" @change=\"composingTime\" placeholder=\"请选择要预约的时间段\">\r\n                         <el-option v-for=\"com in composingList\"\r\n                                    :key=\"com.atid\"\r\n                                    :label=\"com.datetime\"\r\n                                    :value=\"com.atid\"\r\n                         ></el-option>\r\n                    </el-select>\r\n\r\n                  </div>\r\n                </el-col>\r\n              </el-row>\r\n\r\n\r\n\r\n              <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"innerVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"innerVisible = false\">确认</el-button>\r\n              </div>\r\n\r\n\r\n            </el-dialog>\r\n\r\n          </el-form-item>\r\n\r\n\r\n\r\n          <el-form-item label=\"病情\" prop=\"petient\" :label-width=\"formLabelWidth\">\r\n\r\n            <el-input\r\n                type=\"textarea\"\r\n                :rows=\"2\"\r\n                placeholder=\"请输入患者的基本情况\"\r\n                v-model=\"form.petient\">\r\n            </el-input>\r\n          </el-form-item>\r\n\r\n        </el-form>\r\n\r\n\r\n        <div slot=\"footer\" class=\"dialog-footer\" >\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"saveApp('appFormRef')\">确 定</el-button>\r\n        </div>\r\n\r\n      </el-dialog>\r\n\r\n\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <div class=\"grid-content bg-purple-dark\">\r\n\r\n            <div id=\"magicalDragScene\" class=\"mc-root mc-ui-absolute-pane\">\r\n              <el-row>\r\n                <el-col :xs=\"24\">\r\n                  <el-card header=\"预约详情\">\r\n\r\n                    <el-row>\r\n                      <el-col :span=\"4\">\r\n                        <div class=\"grid-content bg-purple\">\r\n                          <div class=\"grid-content bg-purple\">\r\n                            <el-input\r\n                                placeholder=\"请输入\"\r\n                                v-model=\"input\"\r\n                                clearable>\r\n                            </el-input>\r\n                          </div>\r\n                        </div>\r\n                      </el-col>\r\n                      <el-col :span=\"4\">\r\n                        <div class=\"grid-content bg-purple-light\">\r\n                          <el-button icon=\"el-icon-search\" @click=\"search\" type=\"primary\" plain>搜索</el-button>\r\n                        </div>\r\n                      </el-col>\r\n                      <el-col :span=\"16\">\r\n                        <div class=\"grid-content bg-purple\"  style=\"text-align: left\">\r\n                          <el-button class=\"el-icon-circle-plus-outline\" type=\"primary\"  @click=\"dialogFormVisible = true\"> 新增预约信息</el-button>\r\n\r\n                        </div>\r\n                      </el-col>\r\n\r\n                    </el-row>\r\n                  </el-card>\r\n                </el-col>\r\n                <el-col :xs=\"24\">\r\n\r\n\r\n\r\n                  <el-table\r\n                      :data=\"tableData\"\r\n                      style=\"width: 100%\">\r\n                    <el-table-column type=\"expand\">\r\n                      <template slot-scope=\"props\">\r\n                        <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n                          <el-form-item label=\"预约人姓名:\">\r\n                            <span>{{ props.row.username }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item label=\"预约人电话:\">\r\n                            <span>{{ props.row.phone }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item label=\"性别:\">\r\n                            <span>{{ props.row.gender }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item label=\"年龄:\">\r\n                            <span>{{ props.row.age }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item label=\"预约的时间:\">\r\n                            <span>{{ props.row.datetime }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item label=\"预约的医生:\">\r\n                            <span>{{ props.row.name }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item label=\"病情:\">\r\n                            <span>{{ props.row.petient }}</span>\r\n                          </el-form-item>\r\n                        </el-form>\r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"预约编号\"\r\n                        prop=\"appointmentid\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"预约人姓名\"\r\n                        prop=\"username\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"预约人电话\"\r\n                        prop=\"phone\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        label=\"预约的时间\"\r\n                        prop=\"datetime\"\r\n                        sortable>\r\n                    </el-table-column>\r\n                    <el-table-column label=\"操作\">\r\n                      <template slot-scope=\"scope\">\r\n                        <el-button\r\n                            size=\"mini\" type=\"primary\" plain\r\n                            @click=\"see(scope.row.appointmentid)\">就诊</el-button>\r\n                        <el-button\r\n                            size=\"mini\"\r\n                            type=\"danger\"\r\n                            @click=\"handleDelete(scope.row.appointmentid)\">删除</el-button>\r\n                      </template>\r\n                    </el-table-column>\r\n                  </el-table>\r\n\r\n\r\n\r\n\r\n                  <div class=\"block\" style=\"background-color: white\">\r\n\r\n\r\n                    <el-pagination class=\"el-pagination\"\r\n                                   @size-change=\"handleSizeChange\"\r\n                                   @current-change=\"handleCurrentChange\"\r\n                                   layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                   :page-sizes=\"[5, 10, 30, 50]\"\r\n                                   :current-page=\"current\"\r\n                                   :page-size=\"size\"\r\n                                   :total=\"total\">\r\n                    </el-pagination>\r\n\r\n\r\n                  </div>\r\n                </el-col>\r\n\r\n              </el-row>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n\r\n      input: '',//输入框\r\n      total: 0,\r\n      size: 5,\r\n      current: 1,\r\n      no_data_text:'',\r\n\r\n      currentPage4: 4,//分页\r\n      //单选按钮（男女）\r\n      //添加时间\r\n      pickerOptions: {\r\n        shortcuts: [{\r\n          text: '今天',\r\n          onClick(picker) {\r\n            picker.$emit('pick', new Date());\r\n          }\r\n        }, {\r\n          text: '昨天',\r\n          onClick(picker) {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() - 3600 * 1000 * 24);\r\n            picker.$emit('pick', date);\r\n          }\r\n        }, {\r\n          text: '一周前',\r\n          onClick(picker) {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\r\n            picker.$emit('pick', date);\r\n          }\r\n        }]\r\n      },\r\n\r\n      //表格数据呈现\r\n      tableData: [],\r\n\r\n      innerVisible: false,\r\n      //编辑预约信息弹出层\r\n      dialogTableVisible: false,\r\n      //新增预约信息弹出层\r\n      dialogFormVisible: false,\r\n      form: {\r\n        username: '',\r\n        name:'',\r\n        phone: '',\r\n        gender: '',\r\n        age: '',\r\n        datetime: '',\r\n        doctorid:'',\r\n        atid:'',\r\n        petient:'',\r\n      },\r\n\r\n\r\n      composingList:[],\r\n      doctor: [],\r\n      formLabelWidth: '120px',\r\n\r\n\r\n      appFormRules:{\r\n        username:[\r\n          {message:\"请输入预约人姓名\",trigger:'blur',required:true},\r\n        ],\r\n        name:[\r\n          {message:\"请选择医生\",trigger:'blur',required:true},\r\n        ],\r\n        phone:[\r\n          {message:\"请输入预约人手机\",trigger:'blur',required:true},\r\n          {min: 11,max:11, message: '长度为11位', trigger: 'blur'}\r\n        ],\r\n        gender:[\r\n          {message:\"请输入预约人性别\",trigger:'blur',required:true},\r\n        ],\r\n        age:[\r\n          {message:\"请输入预约人年龄\",trigger:'blur',required:true},\r\n        ],\r\n        petient:[\r\n          {message:\"请输入预约人病情\",trigger:'blur',required:true},\r\n        ],\r\n        datetime:[\r\n          {message:\"请输入选择预约时间\",trigger:'blur',required:true},\r\n        ],\r\n\r\n\r\n      }\r\n\r\n    }\r\n\r\n\r\n  },\r\n\r\n  created() {\r\n    this.getAppointmentList();\r\n  },\r\n  methods: {\r\n\r\n\r\n    //添加\r\n    saveApp(formName){\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n\r\n          this.$http.post('/app/ment/save', this.form)\r\n              .then(res => {\r\n                this.$message({\r\n                  showClose: true,\r\n                  message: '恭喜你，操作成功',\r\n                  type: 'success'\r\n                });\r\n                this.getAppointmentList();\r\n                this.dialogFormVisible = false\r\n              })\r\n        } else {\r\n\r\n          return false;\r\n        }\r\n      });\r\n\r\n\r\n    },\r\n\r\n    //获取医生列表\r\n    selectDoctorTime(){\r\n      this.innerVisible = true\r\n      this.$http.get(\"/app/ment/doctorList\").then(res => {\r\n        this.doctor = res.data.data;\r\n      });\r\n\r\n    },\r\n\r\n    //获取当前医生的排版时间\r\n    composing(){\r\n      this.form.atid = ''\r\n      this.form.datetime = ''\r\n      this.$http.get(\"/app/ment/composingList/\"+this.form.doctorid).then(res => {\r\n          this.composingList = res.data.data;\r\n      });\r\n\r\n      this.$http.get('/sys/user/info/' + this.form.doctorid).then(res => {\r\n        this.form.name = res.data.data.name\r\n      })\r\n\r\n    },\r\n\r\n    //时间选择发生改变时\r\n    composingTime(){\r\n      this.$http.get(\"/app/ment/composingOne/\"+this.form.atid).then(res => {\r\n        this.form.datetime = res.data.data.datetime;\r\n      });\r\n    },\r\n\r\n    getAppointmentList(){\r\n        this.$http.get(\"/app/ment/list\",{\r\n          params: {\r\n            username: this.input,\r\n            current: this.current,\r\n            size: this.size\r\n          }\r\n        }).then(res =>{\r\n          this.tableData = res.data.data.records\r\n          this.size = res.data.data.size\r\n          this.current = res.data.data.current\r\n          this.total = res.data.data.total\r\n        });\r\n    },\r\n\r\n    search(){\r\n      this.getAppointmentList();\r\n    },\r\n\r\n    formatter(row, column) {\r\n      return row.address;\r\n    },\r\n\r\n    handleDelete(id) {\r\n\r\n      this.$confirm('此操作将永久删除该条预约信息, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n        center: true\r\n      }).then(() => {\r\n        this.$http.post(\"/app/ment/delete/\"+id).then(res =>{\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n          this.getAppointmentList()\r\n        });\r\n\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    },\r\n\r\n    see(id){\r\n      this.$confirm('确定要就诊吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n        center: true\r\n      }).then(() => {\r\n\r\n        this.$http.post(\"/app/ment/see/\"+id).then(res =>{\r\n          this.$message({\r\n            type: 'success',\r\n            message: '就诊成功!'\r\n          });\r\n          this.getAppointmentList()\r\n        });\r\n\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消就诊'\r\n        });\r\n      });\r\n    },\r\n    //分页\r\n    handleSizeChange(val) {\r\n\r\n      this.size = val\r\n      this.getAppointmentList()\r\n    },\r\n    handleCurrentChange(val) {\r\n\r\n      this.current = val\r\n      this.getAppointmentList()\r\n    },\r\n  },\r\n  name: \"AppointmentList\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.grid-content {\r\n  border-radius: 4px;\r\n  min-height: 36px;\r\n}\r\n\r\n/*表格样式*/\r\n.demo-table-expand {\r\n  font-size: 0;\r\n}\r\n.demo-table-expand label {\r\n  width: 90px;\r\n  color: #99a9bf;\r\n}\r\n.demo-table-expand .el-form-item {\r\n  margin-right: 0;\r\n  margin-bottom: 0;\r\n  width: 50%;\r\n}\r\n</style>"]}]}
{"remainingRequest":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\toolOfjava\\factoryFront\\front\\src\\components\\login\\Face.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\toolOfjava\\factoryFront\\front\\src\\components\\login\\Face.vue","mtime":1627884533798},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcXMgZnJvbSAicXMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJGYWNlIiwNCiAgZGF0YSgpew0KICAgIHJldHVybnsNCiAgICAgIGltZ05hbWU6JycsDQogICAgICBsb2FkaW5nOicnLA0KDQogICAgfQ0KICB9LA0KICBtZXRob2RzOnsNCiAgICAvL+aJp+ihjOaLjeeFpw0KICAgIHN0YXJ0VGFraW5nUGhvdG9zKGNvbnRleHQsdmlkZW8pew0KDQogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCg0KICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sMCwwLDUwMCw1MDApOw0KDQogICAgICAvL+S4i+mdoueahOS7o+eggeaYr+S/neWtmGNhbnZhc+agh+etvumHjOeahOWbvueJh+W5tuS4lOWwhuWFtuaMieS4gOWumueahOinhOWImemHjeWRveWQjQ0KICAgICAgdmFyIHR5cGUgPSAnanBnJzsNCiAgICAgIHZhciBfZml4VHlwZSA9IGZ1bmN0aW9uKHR5cGUpIHsNCiAgICAgICAgdHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9qcGcvaSwgJ2pwZWcnKTsNCiAgICAgICAgdmFyIHIgPSB0eXBlLm1hdGNoKC9wbmd8anBlZ3xibXB8Z2lmLylbMF07DQogICAgICAgIHJldHVybiAnaW1hZ2UvJyArIHI7DQogICAgICB9Ow0KDQogICAgICAvL+iOt+WPlmNhbnZhc+agh+etvumHjOeahOWbvueJh+WGheWuuQ0KICAgICAgdmFyIGltZ0RhdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJykudG9EYXRhVVJMKHR5cGUpOw0KICAgICAgaW1nRGF0YSA9IGltZ0RhdGEucmVwbGFjZShfZml4VHlwZSh0eXBlKSwnaW1hZ2Uvb2N0ZXQtc3RyZWFtJyk7DQoNCiAgICAgIHZhciBzYXZlX2xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLCAnYScpOw0KICAgICAgc2F2ZV9saW5rLmhyZWYgPSBpbWdEYXRhOw0KDQogICAgICBzYXZlX2xpbmsuZG93bmxvYWQgPSB0aGlzLmltZ05hbWU7DQoNCiAgICAgIHRoaXMuY2hpbGRfZmFjZV9tZXRob2RzX2ltZyhpbWdEYXRhKTsNCg0KDQogICAgICAvL+S4iuS8oOWQjuWPsA0KICAgICAgY29uc29sZS5sb2coaW1nRGF0YSk7DQoNCiAgICAgIHZhciBmYWNlRGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgZmFjZURhdGEuYXBwZW5kKCdmYWNlQmFzZTY0JyxpbWdEYXRhKTsNCg0KICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvbG9naW4/JyxmYWNlRGF0YSkudGhlbihyZXM9PnsNCg0KICAgICAgICBjb25zdCBqd3Q9cmVzLmhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXQ0KDQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnU0VUX1RPS0VOJyxqd3QpDQoNCg0KDQoNCiAgICAgIH0pDQoNCg0KICAgICAgLy8gdGhpcy5sb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7DQogICAgICAvLyAgIGxvY2s6IHRydWUsDQogICAgICAvLyAgIHRleHQ6ICfkurrohLjmraPlnKjmo4DmtYvkuK0nLA0KICAgICAgLy8gICBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJywNCiAgICAgIC8vICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScNCiAgICAgIC8vIH0pOw0KICAgICAgLy8NCiAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgLy8gICB0aGlzLmxvYWRpbmcuY2xvc2UoKTsNCiAgICAgIC8vIH0sIDEwMDAwKTsNCg0KDQogICAgfQ0KICB9LA0KICBwcm9wczpbJ2NoaWxkX2ZhY2VfbWV0aG9kc19pbWcnXQ0KfQ0K"},{"version":3,"sources":["Face.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;;;AAKA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA","file":"Face.vue","sourceRoot":"src/components/login","sourcesContent":["<template>\r\n<div>\r\n\r\n  <!--人脸登录区域-->\r\n  <div id=\"face\">\r\n    <video id=\"video\" width=\"424\" height=\"245\"></video>\r\n    <canvas id=\"canvas\" width=\"424\" height=\"505\"></canvas>\r\n    <!--光影特效-->\r\n    <div class=\"renlian\">\r\n      <div class=\"line\"></div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\n\r\nexport default {\r\n  name: \"Face\",\r\n  data(){\r\n    return{\r\n      imgName:'',\r\n      loading:'',\r\n\r\n    }\r\n  },\r\n  methods:{\r\n    //执行拍照\r\n    startTakingPhotos(context,video){\r\n\r\n      this.loading = false;\r\n\r\n      context.drawImage(video,0,0,500,500);\r\n\r\n      //下面的代码是保存canvas标签里的图片并且将其按一定的规则重命名\r\n      var type = 'jpg';\r\n      var _fixType = function(type) {\r\n        type = type.toLowerCase().replace(/jpg/i, 'jpeg');\r\n        var r = type.match(/png|jpeg|bmp|gif/)[0];\r\n        return 'image/' + r;\r\n      };\r\n\r\n      //获取canvas标签里的图片内容\r\n      var imgData = document.getElementById('canvas').toDataURL(type);\r\n      imgData = imgData.replace(_fixType(type),'image/octet-stream');\r\n\r\n      var save_link = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\r\n      save_link.href = imgData;\r\n\r\n      save_link.download = this.imgName;\r\n\r\n      this.child_face_methods_img(imgData);\r\n\r\n\r\n      //上传后台\r\n      console.log(imgData);\r\n\r\n      var faceData = new FormData();\r\n      faceData.append('faceBase64',imgData);\r\n\r\n      this.$http.post('/login?',faceData).then(res=>{\r\n\r\n        const jwt=res.headers['authorization']\r\n\r\n        this.$store.commit('SET_TOKEN',jwt)\r\n\r\n\r\n\r\n\r\n      })\r\n\r\n\r\n      // this.loading = this.$loading({\r\n      //   lock: true,\r\n      //   text: '人脸正在检测中',\r\n      //   spinner: 'el-icon-loading',\r\n      //   background: 'rgba(0, 0, 0, 0.7)'\r\n      // });\r\n      //\r\n      // setTimeout(() => {\r\n      //   this.loading.close();\r\n      // }, 10000);\r\n\r\n\r\n    }\r\n  },\r\n  props:['child_face_methods_img']\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"../../assets/css/login/faceCss/liudong.css\";\r\n</style>"]}]}
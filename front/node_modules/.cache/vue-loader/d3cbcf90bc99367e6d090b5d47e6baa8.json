{"remainingRequest":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\toolOfjava\\factoryFront\\front\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\toolOfjava\\factoryFront\\front\\src\\components\\Login.vue","mtime":1627884533796},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBGYWNlIGZyb20gIkAvY29tcG9uZW50cy9sb2dpbi9GYWNlIjsNCmltcG9ydCBxcyBmcm9tICJxcyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkxvZ2luIiwNCiAgY29tcG9uZW50czoge0ZhY2V9LA0KICBkYXRhKCl7DQogICAgcmV0dXJuew0KICAgICAgbG9naW5Gb3JtOnsNCiAgICAgICAgdXNlcm5hbWU6JycsDQogICAgICAgIHBhc3N3b3JkOicnDQogICAgICB9LA0KICAgICAgZmFjZVN0YXRlOmZhbHNlLA0KICAgICAgZmFjZVRpdGxlOicnLA0KICAgICAgZmFjZUltZ1NyYzonaHR0cHM6Ly90aGlzdXNlcmF2YXRhci5vc3MtY24tZ3Vhbmd6aG91LmFsaXl1bmNzLmNvbS9hZG1pblN5c3RlbS9sb2dvLmpwZycsDQogICAgICBjb250ZXh0OicnLA0KICAgICAgdmlkZW86JycsDQogICAgICBjYW52YXM6JycsDQogICAgICBpbWdOYW1lOicnLA0KICAgICAgZnVsbHNjcmVlbkxvYWRpbmc6ZmFsc2UsDQogICAgICBsb2dpbkZvcm1SdWxlczp7DQogICAgICAgIHVzZXJuYW1lOiBbDQogICAgICAgICAge21lc3NhZ2U6Iuivt+i+k+WFpeaCqOeahOi0puWPtyIsdHJpZ2dlcjonYmx1cicscmVxdWlyZWQ6dHJ1ZX0sDQogICAgICAgICAge21pbjo2LG1lc3NhZ2U6IuiHs+WwkeWkp+S6juetieS6jjbkuKrlrZfnrKYiLHRyaWdnZXI6J2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICBwYXNzd29yZDogWw0KICAgICAgICAgIHttZXNzYWdlOiLor7fovpPlhaXmgqjnmoTlr4bnoIEiLHRyaWdnZXI6J2JsdXInLHJlcXVpcmVkOnRydWV9LA0KICAgICAgICAgIHttaW46NixtZXNzYWdlOiLoh7PlsJHlpKfkuo7nrYnkuo425Liq5a2X56ymIix0cmlnZ2VyOidibHVyJ30NCiAgICAgICAgXQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczp7DQoNCiAgICAvL+W9k+mAieS4reesrOS6jOS4qnRhYuaXtu+8jOW8gOWQr+aRhOWDj+WktA0KICAgIGZhY2UoZSl7DQogICAgICBpZihlLmluZGV4PT0xKXsNCg0KICAgICAgICB0aGlzLmZhY2VTdGF0ZSA9IHRydWU7DQogICAgICAgIHRoaXMuZmFjZVRpdGxlID0gJ+W8gOWni+eZu+W9lSc7DQogICAgICAgIHRoaXMuZmFjZUltZ1NyYyA9ICdodHRwczovL3RoaXN1c2VyYXZhdGFyLm9zcy1jbi1ndWFuZ3pob3UuYWxpeXVuY3MuY29tL2FkbWluU3lzdGVtL2ZhY2Vkb25nMy5naWYnOw0KDQoNCiAgICAgICAgZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLHN1Y2Nlc3MsZXJyb3Ipew0KICAgICAgICAgIGlmKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKXsNCiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKHN1Y2Nlc3MpOw0KICAgICAgICAgIH1lbHNlIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKSB7DQogICAgICAgICAgICBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLHN1Y2Nlc3MsZXJyb3IpOw0KICAgICAgICAgIH1lbHNlIGlmIChuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7DQogICAgICAgICAgICBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLHN1Y2Nlc3MsZXJyb3IpOw0KICAgICAgICAgIH1lbHNlIGlmIChuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKSB7DQogICAgICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLHN1Y2Nlc3MsZXJyb3IpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHRoaXMudmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW8nKTsNCiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7DQogICAgICAgIHRoaXMuY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICB2YXIgdmlkZW8gPSB0aGlzLnZpZGVvOw0KICAgICAgICAvL+aIkOWKn+Wbnuiwgw0KICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHN0cmVhbSl7DQogICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtOw0KICAgICAgICAgIHZpZGVvLnBsYXkoKTsNCiAgICAgICAgfQ0KICAgICAgICAvL+Wksei0peWbnuiwgw0KICAgICAgICBmdW5jdGlvbiBlcnJvcihlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCLorr/pl67nlKjmiLflqpLkvZPlpLHotKUiKTsNCiAgICAgICAgfQ0KICAgICAgICAvL+W8gOWQr+aRhOWDj+WktA0KICAgICAgICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHsNCiAgICAgICAgICBnZXRVc2VyTWVkaWEoe3ZpZGVvOnt3aWR0aDo1MDAsaGVpZ2h0OjUwMH19LHN1Y2Nlc3MsZXJyb3IpDQogICAgICAgIH1lbHNlIHsNCiAgICAgICAgICBhbGVydCgi5LiN5pSv5oyBIik7DQogICAgICAgIH0NCg0KICAgICAgfWVsc2V7DQoNCiAgICAgICAgdGhpcy5mYWNlU3RhdGUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5mYWNlVGl0bGUgPSAnJzsNCiAgICAgICAgdGhpcy5mYWNlSW1nU3JjID0gJ2h0dHBzOi8vdGhpc3VzZXJhdmF0YXIub3NzLWNuLWd1YW5nemhvdS5hbGl5dW5jcy5jb20vYWRtaW5TeXN0ZW0vbG9nby5qcGcnOw0KDQogICAgICAgIC8v6YeN5paw5Yi35paw6aG16Z2iDQogICAgICAgIGxvY2F0aW9uLiByZWxvYWQoKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy/mj5DkuqTkurrohLjkv6Hmga8NCiAgICBmYWNlU3VibWl0KCl7DQogICAgICBpZih0aGlzLmZhY2VTdGF0ZSl7DQogICAgICAgIC8v6LCD55So5a2Q57uE5Lu2IOWunueOsOaLjeeFp+eahOWKn+iDvQ0KICAgICAgICB0aGlzLiRyZWZzLmZhY2VDaGlsZC5zdGFydFRha2luZ1Bob3Rvcyh0aGlzLmNvbnRleHQsdGhpcy52aWRlbyk7DQogICAgICB9DQoNCiAgICB9LA0KICAgIC8v5L+u5pS55Zu+54mH55qE5YC8DQogICAgdXBkYXRlSW1nKHNyYyl7DQogICAgICB0aGlzLmZhY2VJbWdTcmMgPSBzcmMgOw0KICAgIH0sDQogICAgLy/ph43nva7ooajljZUNCiAgICByZXN0TG9naW4oKXsNCiAgICAgIHRoaXMuJHJlZnMubG9naW5Gb3JtUmVmLnJlc2V0RmllbGRzKCk7DQogICAgfSwNCg0KICAgIC8v5byA5aeL55m75b2VDQogICAgbG9naW4oKXsNCg0KICAgICAgdGhpcy4kcmVmcy5sb2dpbkZvcm1SZWYudmFsaWRhdGUoKHZhbGlkKT0+ew0KICAgICAgICAgIGlmKHZhbGlkKXsNCg0KICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvbG9naW4/Jytxcy5zdHJpbmdpZnkodGhpcy5sb2dpbkZvcm0pKS50aGVuKHJlcz0+ew0KDQogICAgICAgICAgICAgIGNvbnN0IGp3dD1yZXMuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddDQoNCiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfVE9LRU4nLGp3dCkNCiAgICAgICAgICAgICAgY29uc3QgbG9hZGluZyA9IHRoaXMuJGxvYWRpbmcoew0KICAgICAgICAgICAgICAgIGxvY2s6IHRydWUsDQogICAgICAgICAgICAgICAgdGV4dDogJ+eZu+W9leS4rS4uLi4nLA0KICAgICAgICAgICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLA0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIDAuNyknDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7DQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ob21lIik7DQogICAgICAgICAgICAgIH0sIDIwMDApOw0KDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KDQogIH0NCn0NCg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n\r\n  <!--最外层-->\r\n    <div class=\"login_container\">\r\n\r\n        <!--中间层-->\r\n        <div class=\"login_box\">\r\n          <!--图标区域-->\r\n          <div class=\"avatar_box\"  :title=\"faceTitle\" v-loading.fullscreen.lock=\"fullscreenLoading\" style=\"cursor: pointer\" @click=\"faceSubmit\">\r\n              <img :src=\"faceImgSrc\"/>\r\n          </div>\r\n\r\n          <!--登录表单区域-->\r\n          <el-tabs @tab-click=\"face\" type=\"border-card\" class=\"tabs_login\">\r\n            <el-tab-pane>\r\n              <span slot=\"label\"><i class=\"el-icon-unlock\"></i> 密码登录</span>\r\n                  <div class=\"tabs_login_div\">\r\n                    <el-form :rules=\"loginFormRules\" :model=\"loginForm\" ref=\"loginFormRef\" >\r\n                      <!--账号-->\r\n                      <el-form-item prop=\"username\">\r\n                        <el-input v-model=\"loginForm.username\"\r\n                                  type=\"text\" placeholder=\"账号\"\r\n                        prefix-icon=\"el-icon-s-custom\"\r\n                        ></el-input>\r\n                      </el-form-item>\r\n                      <!--密码-->\r\n                      <el-form-item prop=\"password\">\r\n                        <el-input v-model=\"loginForm.password\"\r\n                                  type=\"password\" placeholder=\"密码\"\r\n                        prefix-icon=\"el-icon-key\"\r\n                        ></el-input>\r\n                      </el-form-item>\r\n\r\n                      <el-form-item class=\"btns\">\r\n                        <el-button @click=\"login\" type=\"primary\">登录</el-button>\r\n                        <el-button @click=\"restLogin\" type=\"info\">重置</el-button>\r\n                      </el-form-item>\r\n\r\n                    </el-form>\r\n                  </div>\r\n\r\n            </el-tab-pane>\r\n\r\n\r\n          </el-tabs>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport Face from \"@/components/login/Face\";\r\nimport qs from \"qs\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components: {Face},\r\n  data(){\r\n    return{\r\n      loginForm:{\r\n        username:'',\r\n        password:''\r\n      },\r\n      faceState:false,\r\n      faceTitle:'',\r\n      faceImgSrc:'https://thisuseravatar.oss-cn-guangzhou.aliyuncs.com/adminSystem/logo.jpg',\r\n      context:'',\r\n      video:'',\r\n      canvas:'',\r\n      imgName:'',\r\n      fullscreenLoading:false,\r\n      loginFormRules:{\r\n        username: [\r\n          {message:\"请输入您的账号\",trigger:'blur',required:true},\r\n          {min:6,message:\"至少大于等于6个字符\",trigger:'blur'}\r\n        ],\r\n        password: [\r\n          {message:\"请输入您的密码\",trigger:'blur',required:true},\r\n          {min:6,message:\"至少大于等于6个字符\",trigger:'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n\r\n    //当选中第二个tab时，开启摄像头\r\n    face(e){\r\n      if(e.index==1){\r\n\r\n        this.faceState = true;\r\n        this.faceTitle = '开始登录';\r\n        this.faceImgSrc = 'https://thisuseravatar.oss-cn-guangzhou.aliyuncs.com/adminSystem/facedong3.gif';\r\n\r\n\r\n        function getUserMedia(constraints,success,error){\r\n          if(navigator.mediaDevices.getUserMedia){\r\n            navigator.mediaDevices.getUserMedia(constraints).then(success);\r\n          }else if (navigator.webkitGetUserMedia) {\r\n            navigator.webkitGetUserMedia(constraints,success,error);\r\n          }else if (navigator.mozGetUserMedia) {\r\n            navigator.mozGetUserMedia(constraints,success,error);\r\n          }else if (navigator.getUserMedia) {\r\n            navigator.getUserMedia(constraints,success,error)\r\n          }\r\n        }\r\n        this.video = document.getElementById('video');\r\n        this.canvas = document.getElementById('canvas');\r\n        this.context = canvas.getContext('2d');\r\n        var video = this.video;\r\n        //成功回调\r\n        function success(stream){\r\n          video.srcObject = stream;\r\n          video.play();\r\n        }\r\n        //失败回调\r\n        function error(error) {\r\n          console.log(\"访问用户媒体失败\");\r\n        }\r\n        //开启摄像头\r\n        if (navigator.mediaDevices.getUserMedia || navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia) {\r\n          getUserMedia({video:{width:500,height:500}},success,error)\r\n        }else {\r\n          alert(\"不支持\");\r\n        }\r\n\r\n      }else{\r\n\r\n        this.faceState = false;\r\n        this.faceTitle = '';\r\n        this.faceImgSrc = 'https://thisuseravatar.oss-cn-guangzhou.aliyuncs.com/adminSystem/logo.jpg';\r\n\r\n        //重新刷新页面\r\n        location. reload();\r\n      }\r\n    },\r\n\r\n    //提交人脸信息\r\n    faceSubmit(){\r\n      if(this.faceState){\r\n        //调用子组件 实现拍照的功能\r\n        this.$refs.faceChild.startTakingPhotos(this.context,this.video);\r\n      }\r\n\r\n    },\r\n    //修改图片的值\r\n    updateImg(src){\r\n      this.faceImgSrc = src ;\r\n    },\r\n    //重置表单\r\n    restLogin(){\r\n      this.$refs.loginFormRef.resetFields();\r\n    },\r\n\r\n    //开始登录\r\n    login(){\r\n\r\n      this.$refs.loginFormRef.validate((valid)=>{\r\n          if(valid){\r\n\r\n            this.$http.post('/login?'+qs.stringify(this.loginForm)).then(res=>{\r\n\r\n              const jwt=res.headers['authorization']\r\n\r\n              this.$store.commit('SET_TOKEN',jwt)\r\n              const loading = this.$loading({\r\n                lock: true,\r\n                text: '登录中....',\r\n                spinner: 'el-icon-loading',\r\n                background: 'rgba(0, 0, 0, 0.7)'\r\n              });\r\n              setTimeout(() => {\r\n                loading.close();\r\n                this.$router.push(\"/home\");\r\n              }, 2000);\r\n\r\n            })\r\n          }\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style  scoped>\r\n@import \"../assets/css/login/login.css\";\r\n</style>"]}]}
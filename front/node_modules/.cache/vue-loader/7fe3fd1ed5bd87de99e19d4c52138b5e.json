{"remainingRequest":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\toolOfjava\\factoryFront\\front\\src\\components\\login\\Face.vue?vue&type=style&index=0&id=2120c9f3&scoped=true&lang=css&","dependencies":[{"path":"D:\\toolOfjava\\factoryFront\\front\\src\\components\\login\\Face.vue","mtime":1627884533798},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCkBpbXBvcnQgIi4uLy4uL2Fzc2V0cy9jc3MvbG9naW4vZmFjZUNzcy9saXVkb25nLmNzcyI7DQo="},{"version":3,"sources":["Face.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA","file":"Face.vue","sourceRoot":"src/components/login","sourcesContent":["<template>\r\n<div>\r\n\r\n  <!--人脸登录区域-->\r\n  <div id=\"face\">\r\n    <video id=\"video\" width=\"424\" height=\"245\"></video>\r\n    <canvas id=\"canvas\" width=\"424\" height=\"505\"></canvas>\r\n    <!--光影特效-->\r\n    <div class=\"renlian\">\r\n      <div class=\"line\"></div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\n\r\nexport default {\r\n  name: \"Face\",\r\n  data(){\r\n    return{\r\n      imgName:'',\r\n      loading:'',\r\n\r\n    }\r\n  },\r\n  methods:{\r\n    //执行拍照\r\n    startTakingPhotos(context,video){\r\n\r\n      this.loading = false;\r\n\r\n      context.drawImage(video,0,0,500,500);\r\n\r\n      //下面的代码是保存canvas标签里的图片并且将其按一定的规则重命名\r\n      var type = 'jpg';\r\n      var _fixType = function(type) {\r\n        type = type.toLowerCase().replace(/jpg/i, 'jpeg');\r\n        var r = type.match(/png|jpeg|bmp|gif/)[0];\r\n        return 'image/' + r;\r\n      };\r\n\r\n      //获取canvas标签里的图片内容\r\n      var imgData = document.getElementById('canvas').toDataURL(type);\r\n      imgData = imgData.replace(_fixType(type),'image/octet-stream');\r\n\r\n      var save_link = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\r\n      save_link.href = imgData;\r\n\r\n      save_link.download = this.imgName;\r\n\r\n      this.child_face_methods_img(imgData);\r\n\r\n\r\n      //上传后台\r\n      console.log(imgData);\r\n\r\n      var faceData = new FormData();\r\n      faceData.append('faceBase64',imgData);\r\n\r\n      this.$http.post('/login?',faceData).then(res=>{\r\n\r\n        const jwt=res.headers['authorization']\r\n\r\n        this.$store.commit('SET_TOKEN',jwt)\r\n\r\n\r\n\r\n\r\n      })\r\n\r\n\r\n      // this.loading = this.$loading({\r\n      //   lock: true,\r\n      //   text: '人脸正在检测中',\r\n      //   spinner: 'el-icon-loading',\r\n      //   background: 'rgba(0, 0, 0, 0.7)'\r\n      // });\r\n      //\r\n      // setTimeout(() => {\r\n      //   this.loading.close();\r\n      // }, 10000);\r\n\r\n\r\n    }\r\n  },\r\n  props:['child_face_methods_img']\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"../../assets/css/login/faceCss/liudong.css\";\r\n</style>"]}]}
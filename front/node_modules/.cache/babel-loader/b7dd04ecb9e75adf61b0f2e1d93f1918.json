{"remainingRequest":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\toolOfjava\\factoryFront\\front\\src\\components\\login\\Face.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\toolOfjava\\factoryFront\\front\\src\\components\\login\\Face.vue","mtime":1627884533798},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBxcyBmcm9tICJxcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmFjZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGltZ05hbWU6ICcnLAogICAgICBsb2FkaW5nOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5omn6KGM5ouN54WnCiAgICBzdGFydFRha2luZ1Bob3RvczogZnVuY3Rpb24gc3RhcnRUYWtpbmdQaG90b3MoY29udGV4dCwgdmlkZW8pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICBjb250ZXh0LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgNTAwLCA1MDApOyAvL+S4i+mdoueahOS7o+eggeaYr+S/neWtmGNhbnZhc+agh+etvumHjOeahOWbvueJh+W5tuS4lOWwhuWFtuaMieS4gOWumueahOinhOWImemHjeWRveWQjQoKICAgICAgdmFyIHR5cGUgPSAnanBnJzsKCiAgICAgIHZhciBfZml4VHlwZSA9IGZ1bmN0aW9uIF9maXhUeXBlKHR5cGUpIHsKICAgICAgICB0eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL2pwZy9pLCAnanBlZycpOwogICAgICAgIHZhciByID0gdHlwZS5tYXRjaCgvcG5nfGpwZWd8Ym1wfGdpZi8pWzBdOwogICAgICAgIHJldHVybiAnaW1hZ2UvJyArIHI7CiAgICAgIH07IC8v6I635Y+WY2FudmFz5qCH562+6YeM55qE5Zu+54mH5YaF5a65CgoKICAgICAgdmFyIGltZ0RhdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJykudG9EYXRhVVJMKHR5cGUpOwogICAgICBpbWdEYXRhID0gaW1nRGF0YS5yZXBsYWNlKF9maXhUeXBlKHR5cGUpLCAnaW1hZ2Uvb2N0ZXQtc3RyZWFtJyk7CiAgICAgIHZhciBzYXZlX2xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLCAnYScpOwogICAgICBzYXZlX2xpbmsuaHJlZiA9IGltZ0RhdGE7CiAgICAgIHNhdmVfbGluay5kb3dubG9hZCA9IHRoaXMuaW1nTmFtZTsKICAgICAgdGhpcy5jaGlsZF9mYWNlX21ldGhvZHNfaW1nKGltZ0RhdGEpOyAvL+S4iuS8oOWQjuWPsAoKICAgICAgY29uc29sZS5sb2coaW1nRGF0YSk7CiAgICAgIHZhciBmYWNlRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmYWNlRGF0YS5hcHBlbmQoJ2ZhY2VCYXNlNjQnLCBpbWdEYXRhKTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvbG9naW4/JywgZmFjZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBqd3QgPSByZXMuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddOwoKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfVE9LRU4nLCBqd3QpOwogICAgICB9KTsgLy8gdGhpcy5sb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7CiAgICAgIC8vICAgbG9jazogdHJ1ZSwKICAgICAgLy8gICB0ZXh0OiAn5Lq66IS45q2j5Zyo5qOA5rWL5LitJywKICAgICAgLy8gICBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJywKICAgICAgLy8gICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAwLjcpJwogICAgICAvLyB9KTsKICAgICAgLy8KICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIC8vICAgdGhpcy5sb2FkaW5nLmNsb3NlKCk7CiAgICAgIC8vIH0sIDEwMDAwKTsKICAgIH0KICB9LAogIHByb3BzOiBbJ2NoaWxkX2ZhY2VfbWV0aG9kc19pbWcnXQp9Ow=="},{"version":3,"sources":["Face.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAiBA,OAAA,EAAA,MAAA,IAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAKA,GARA;AASA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,iBAFA,6BAEA,OAFA,EAEA,KAFA,EAEA;AAAA;;AAEA,WAAA,OAAA,GAAA,KAAA;AAEA,MAAA,OAAA,CAAA,SAAA,CAAA,KAAA,EAAA,CAAA,EAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAJA,CAMA;;AACA,UAAA,IAAA,GAAA,KAAA;;AACA,UAAA,QAAA,GAAA,SAAA,QAAA,CAAA,IAAA,EAAA;AACA,QAAA,IAAA,GAAA,IAAA,CAAA,WAAA,GAAA,OAAA,CAAA,MAAA,EAAA,MAAA,CAAA;AACA,YAAA,CAAA,GAAA,IAAA,CAAA,KAAA,CAAA,kBAAA,EAAA,CAAA,CAAA;AACA,eAAA,WAAA,CAAA;AACA,OAJA,CARA,CAcA;;;AACA,UAAA,OAAA,GAAA,QAAA,CAAA,cAAA,CAAA,QAAA,EAAA,SAAA,CAAA,IAAA,CAAA;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA,QAAA,CAAA,IAAA,CAAA,EAAA,oBAAA,CAAA;AAEA,UAAA,SAAA,GAAA,QAAA,CAAA,eAAA,CAAA,8BAAA,EAAA,GAAA,CAAA;AACA,MAAA,SAAA,CAAA,IAAA,GAAA,OAAA;AAEA,MAAA,SAAA,CAAA,QAAA,GAAA,KAAA,OAAA;AAEA,WAAA,sBAAA,CAAA,OAAA,EAvBA,CA0BA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AAEA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,YAAA,EAAA,OAAA;AAEA,WAAA,KAAA,CAAA,IAAA,CAAA,SAAA,EAAA,QAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AAEA,YAAA,GAAA,GAAA,GAAA,CAAA,OAAA,CAAA,eAAA,CAAA;;AAEA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,GAAA;AAKA,OATA,EAhCA,CA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AA1DA,GATA;AAqEA,EAAA,KAAA,EAAA,CAAA,wBAAA;AArEA,CAAA","sourcesContent":["<template>\r\n<div>\r\n\r\n  <!--人脸登录区域-->\r\n  <div id=\"face\">\r\n    <video id=\"video\" width=\"424\" height=\"245\"></video>\r\n    <canvas id=\"canvas\" width=\"424\" height=\"505\"></canvas>\r\n    <!--光影特效-->\r\n    <div class=\"renlian\">\r\n      <div class=\"line\"></div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\n\r\nexport default {\r\n  name: \"Face\",\r\n  data(){\r\n    return{\r\n      imgName:'',\r\n      loading:'',\r\n\r\n    }\r\n  },\r\n  methods:{\r\n    //执行拍照\r\n    startTakingPhotos(context,video){\r\n\r\n      this.loading = false;\r\n\r\n      context.drawImage(video,0,0,500,500);\r\n\r\n      //下面的代码是保存canvas标签里的图片并且将其按一定的规则重命名\r\n      var type = 'jpg';\r\n      var _fixType = function(type) {\r\n        type = type.toLowerCase().replace(/jpg/i, 'jpeg');\r\n        var r = type.match(/png|jpeg|bmp|gif/)[0];\r\n        return 'image/' + r;\r\n      };\r\n\r\n      //获取canvas标签里的图片内容\r\n      var imgData = document.getElementById('canvas').toDataURL(type);\r\n      imgData = imgData.replace(_fixType(type),'image/octet-stream');\r\n\r\n      var save_link = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\r\n      save_link.href = imgData;\r\n\r\n      save_link.download = this.imgName;\r\n\r\n      this.child_face_methods_img(imgData);\r\n\r\n\r\n      //上传后台\r\n      console.log(imgData);\r\n\r\n      var faceData = new FormData();\r\n      faceData.append('faceBase64',imgData);\r\n\r\n      this.$http.post('/login?',faceData).then(res=>{\r\n\r\n        const jwt=res.headers['authorization']\r\n\r\n        this.$store.commit('SET_TOKEN',jwt)\r\n\r\n\r\n\r\n\r\n      })\r\n\r\n\r\n      // this.loading = this.$loading({\r\n      //   lock: true,\r\n      //   text: '人脸正在检测中',\r\n      //   spinner: 'el-icon-loading',\r\n      //   background: 'rgba(0, 0, 0, 0.7)'\r\n      // });\r\n      //\r\n      // setTimeout(() => {\r\n      //   this.loading.close();\r\n      // }, 10000);\r\n\r\n\r\n    }\r\n  },\r\n  props:['child_face_methods_img']\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"../../assets/css/login/faceCss/liudong.css\";\r\n</style>"],"sourceRoot":"src/components/login"}]}
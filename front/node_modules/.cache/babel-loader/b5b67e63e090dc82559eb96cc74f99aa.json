{"remainingRequest":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\toolOfjava\\factoryFront\\front\\src\\router\\index.js","dependencies":[{"path":"D:\\toolOfjava\\factoryFront\\front\\src\\router\\index.js","mtime":1627884533804},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\toolOfjava\\factoryFront\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgSG9tZSBmcm9tICJAL2NvbXBvbmVudHMvSG9tZSI7CmltcG9ydCBJbmRleCBmcm9tICJAL3ZpZXdzL3N5cy9JbmRleCI7CmltcG9ydCAnLi4vYXNzZXRzL2Nzcy9nbG9naW4uY3NzJzsKaW1wb3J0IGF4aW9zIGZyb20gIi4uL2F4aW9zIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4uL3N0b3JlIjsKaW1wb3J0IG1lbnVzIGZyb20gIkAvc3RvcmUvbW9kdWxlcy9tZW51cyI7ClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIG9yaWdpbmFsUHVzaCA9IFZ1ZVJvdXRlci5wcm90b3R5cGUucHVzaDsKdmFyIG9yaWdpbmFsUmVwbGFjZSA9IFZ1ZVJvdXRlci5wcm90b3R5cGUucmVwbGFjZTsgLy9wdXNoCgpWdWVSb3V0ZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoKGxvY2F0aW9uLCBvblJlc29sdmUsIG9uUmVqZWN0KSB7CiAgaWYgKG9uUmVzb2x2ZSB8fCBvblJlamVjdCkgcmV0dXJuIG9yaWdpbmFsUHVzaC5jYWxsKHRoaXMsIGxvY2F0aW9uLCBvblJlc29sdmUsIG9uUmVqZWN0KTsKICByZXR1cm4gb3JpZ2luYWxQdXNoLmNhbGwodGhpcywgbG9jYXRpb24pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIHJldHVybiBlcnI7CiAgfSk7Cn07IC8vIHJlcGxhY2UKCgpWdWVSb3V0ZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiBwdXNoKGxvY2F0aW9uLCBvblJlc29sdmUsIG9uUmVqZWN0KSB7CiAgaWYgKG9uUmVzb2x2ZSB8fCBvblJlamVjdCkgcmV0dXJuIG9yaWdpbmFsUmVwbGFjZS5jYWxsKHRoaXMsIGxvY2F0aW9uLCBvblJlc29sdmUsIG9uUmVqZWN0KTsKICByZXR1cm4gb3JpZ2luYWxSZXBsYWNlLmNhbGwodGhpcywgbG9jYXRpb24pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIHJldHVybiBlcnI7CiAgfSk7Cn07Cgp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnL2hvbWUnLAogIG5hbWU6ICdIb21lJywKICBjb21wb25lbnQ6IEhvbWUsCiAgcmVkaXJlY3Q6ICIvaW5kZXgiLAogIGNoaWxkcmVuOiBbewogICAgLy/pppbpobUKICAgIHBhdGg6ICcvaW5kZXgnLAogICAgbmFtZTogJ0luZGV4JywKICAgIGNvbXBvbmVudDogSW5kZXgKICB9XSwKICBjYWNoZTogdHJ1ZQp9LCB7CiAgcGF0aDogJy8nLAogIHJlZGlyZWN0OiAnL2xvZ2luJwp9LCB7CiAgcGF0aDogJy9sb2dpbicsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCdAL2NvbXBvbmVudHMvTG9naW4nKTsKICB9Cn1dOwp2YXIgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgbW9kZTogJ2hpc3RvcnknLAogIGJhc2U6IHByb2Nlc3MuZW52LkJBU0VfVVJMLAogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHsKICB2YXIgaGFzUm91dGUgPSBzdG9yZS5zdGF0ZS5tZW51cy5oYXNSb3V0ZXM7CiAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7CgogIGlmICh0by5wYXRoID09ICcvbG9naW4nKSB7CiAgICBuZXh0KCk7CiAgfSBlbHNlIGlmICghdG9rZW4pIHsKICAgIG5leHQoewogICAgICBwYXRoOiAnL2xvZ2luJwogICAgfSk7CiAgfSBlbHNlIGlmICh0b2tlbiAmJiAhaGFzUm91dGUpIHsKICAgIGF4aW9zLmdldCgiL3N5cy9tZW51L25hdiIsIHsKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb25zb2xlLmxvZygi5Yia5Yia5Yqg6L295pe255qE5pWw5o2uPT09PSIpOwogICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhLm5hdik7IC8v5ou/5Yiw5YiX6KGoCgogICAgICBzdG9yZS5jb21taXQoInNldE1lbnVMaXN0IiwgcmVzLmRhdGEuZGF0YS5uYXYpOyAvL+aLv+WIsOeUqOaIt+adg+mZkAoKICAgICAgc3RvcmUuY29tbWl0KCJzZXRQZXJtTGlzdCIsIHJlcy5kYXRhLmRhdGEuYXV0aG9yaXR5cyk7IC8vIOWKqOaAgee7keWumui3r+eUsQoKICAgICAgdmFyIG5ld1JvdXRlcyA9IHJvdXRlci5vcHRpb25zLnJvdXRlczsKICAgICAgcmVzLmRhdGEuZGF0YS5uYXYuZm9yRWFjaChmdW5jdGlvbiAobWVudSkgewogICAgICAgIGlmIChtZW51LmNoaWxkcmVuKSB7CiAgICAgICAgICBtZW51LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgLy8g6L2s5oiQ6Lev55SxCiAgICAgICAgICAgIHZhciByb3V0ZSA9IG1lbnVUb1JvdXRlKGUpOyAvLyDlkKfot6/nlLHmt7vliqDliLDot6/nlLHnrqHnkIbkuK0KCiAgICAgICAgICAgIGlmIChyb3V0ZSkgewogICAgICAgICAgICAgIG5ld1JvdXRlc1swXS5jaGlsZHJlbi5wdXNoKHJvdXRlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc29sZS5sb2cobmV3Um91dGVzKTsKICAgICAgcm91dGVyLmFkZFJvdXRlcyhuZXdSb3V0ZXMpOwogICAgICBoYXNSb3V0ZSA9IHRydWU7CiAgICAgIHN0b3JlLmNvbW1pdCgiY2hhbmdlUm91dGVTdGF0dXMiLCBoYXNSb3V0ZSk7CiAgICB9KTsKICB9CgogIG5leHQoKTsKfSk7IC8vIOWvvOiIqui9rOaIkOi3r+eUsQoKdmFyIG1lbnVUb1JvdXRlID0gZnVuY3Rpb24gbWVudVRvUm91dGUobWVudSkgewogIGlmICghbWVudS5jb21wb25lbnQpIHsKICAgIHJldHVybiBudWxsOwogIH0KCiAgdmFyIHJvdXRlID0gewogICAgbmFtZTogbWVudS5uYW1lLAogICAgcGF0aDogbWVudS5wYXRoLAogICAgbWV0YTogewogICAgICBpY29uOiBtZW51Lmljb24sCiAgICAgIHRpdGxlOiBtZW51LnRpdGxlCiAgICB9CiAgfTsKCiAgcm91dGUuY29tcG9uZW50ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGltcG9ydCgnQC92aWV3cy8nICsgbWVudS5jb21wb25lbnQpOwogIH07CgogIHJldHVybiByb3V0ZTsKfTsKCmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["D:/toolOfjava/factoryFront/front/src/router/index.js"],"names":["Vue","VueRouter","Home","Index","axios","store","menus","use","originalPush","prototype","push","originalReplace","replace","location","onResolve","onReject","call","catch","err","routes","path","name","component","redirect","children","cache","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","hasRoute","state","hasRoutes","token","localStorage","getItem","get","headers","Authorization","then","res","console","log","data","nav","commit","authoritys","newRoutes","options","forEach","menu","e","route","menuToRoute","addRoutes","meta","icon","title"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\n\r\nimport Home from \"@/components/Home\";\r\nimport Index from \"@/views/sys/Index\";\r\n\r\nimport '../assets/css/glogin.css'\r\nimport axios from \"../axios\";\r\nimport store from \"../store\"\r\nimport menus from \"@/store/modules/menus\";\r\n\r\nVue.use(VueRouter)\r\n\r\nconst originalPush = VueRouter.prototype.push\r\nconst originalReplace = VueRouter.prototype.replace\r\n//push\r\nVueRouter.prototype.push = function push (location, onResolve, onReject) {\r\n    if (onResolve || onReject) return originalPush.call(this, location, onResolve, onReject)\r\n    return originalPush.call(this, location).catch(err => err)\r\n}\r\n// replace\r\nVueRouter.prototype.replace = function push (location, onResolve, onReject) {\r\n    if (onResolve || onReject) return originalReplace.call(this, location, onResolve, onReject)\r\n    return originalReplace.call(this, location).catch(err => err)\r\n}\r\n\r\nconst routes = [\r\n\r\n    {\r\n        path: '/home',\r\n        name: 'Home',\r\n        component: Home,\r\n        redirect: \"/index\",\r\n        children: [\r\n            {//首页\r\n                path: '/index',\r\n                name:'Index',\r\n                component: Index\r\n            },\r\n\r\n        ],\r\n        cache:true\r\n    },\r\n    {\r\n        path: '/',\r\n        redirect: '/login'\r\n    },\r\n    {\r\n        path: '/login',\r\n        component: () => import('@/components/Login')\r\n    }\r\n\r\n]\r\n\r\nconst router = new VueRouter({\r\n    mode: 'history',\r\n    base: process.env.BASE_URL,\r\n    routes\r\n})\r\n\r\n\r\nrouter.beforeEach((to, from, next) =>{\r\n\r\n\r\n    let hasRoute = store.state.menus.hasRoutes\r\n\r\n    let token = localStorage.getItem(\"token\")\r\n\r\n    if(to.path=='/login'){\r\n        next()\r\n    }else if(!token){\r\n        next({path:'/login'})\r\n    }else if(token &&!hasRoute){\r\n        axios.get(\"/sys/menu/nav\",{\r\n\r\n            headers:{\r\n                Authorization:localStorage.getItem(\"token\")\r\n            }\r\n\r\n        }).then(res => {\r\n\r\n            console.log(\"刚刚加载时的数据====\")\r\n            console.log(res.data.data.nav);\r\n\r\n            //拿到列表\r\n            store.commit(\"setMenuList\",res.data.data.nav)\r\n            //拿到用户权限\r\n            store.commit(\"setPermList\",res.data.data.authoritys)\r\n\r\n\r\n            // 动态绑定路由\r\n            let newRoutes = router.options.routes\r\n\r\n            res.data.data.nav.forEach(menu => {\r\n                if (menu.children) {\r\n                    menu.children.forEach(e => {\r\n\r\n                        // 转成路由\r\n                        let route = menuToRoute(e)\r\n\r\n                        // 吧路由添加到路由管理中\r\n                        if (route) {\r\n                            newRoutes[0].children.push(route)\r\n                        }\r\n\r\n                    })\r\n                }\r\n            })\r\n\r\n            console.log(newRoutes)\r\n            router.addRoutes(newRoutes)\r\n            hasRoute = true\r\n            store.commit(\"changeRouteStatus\",hasRoute)\r\n        })\r\n    }\r\n\r\n\r\n    next()\r\n})\r\n\r\n// 导航转成路由\r\nconst menuToRoute = (menu) => {\r\n\r\n    if (!menu.component) {\r\n        return null\r\n    }\r\n\r\n    let route = {\r\n        name: menu.name,\r\n        path: menu.path,\r\n        meta: {\r\n            icon: menu.icon,\r\n            title: menu.title\r\n        }\r\n    }\r\n    route.component = () => import('@/views/' + menu.component)\r\n\r\n    return route\r\n}\r\n\r\nexport default router\r\n"]}]}